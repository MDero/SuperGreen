function addTimeLine(){for($length=$(".slider li").length,$plan=$("#plan"),$plan.append('<li class="activeButton"><a></a></li>'),$i=1;$length>$i;++$i)$plan.append("<li><a></a></li>")}function goTo(a){$currentSlide=$("#plan li").eq(a),$capt=$currentSlide.find(".picCaption"),""!=$capt.html()?$capt.show():$capt.hide(),$("#timeline").html(currentIndex+1+"/"+$nbrChild),$("#plan li").removeClass("activeButton"),$currentSlide.addClass("activeButton")}function prevDiapo(){Math.round(1*Math.random()+1),currentIndex=0==currentIndex?$(".slider li").length-1:currentIndex-1,$(".slider").dequeue().animate({marginLeft:0},1e3,function(){$(this).css({marginLeft:-900}).find("li:first").before($(this).find("li:last"))}),goTo(currentIndex)}function nextDiapo(){Math.round(1*Math.random()+1),currentIndex=currentIndex==$(".slider li").length-1?0:currentIndex+1,$(".slider").dequeue().animate({marginLeft:-1800},1e3,function(){$(this).css({marginLeft:-900}).find("li:last").after($(this).find("li:first"))}),goTo(currentIndex)}function pause(){$(this).dequeue(),clearInterval(timer),$("#play").show(),$("#pause").hide()}$(function(){$(".containerSlide").bind("mouseenter",function(){$("#play").is(":hidden")&&clearInterval(timer)}).bind("mouseleave",function(){$("#play").is(":hidden")&&(timer=setInterval(nextDiapo,slideInterval))}),$("#play").click(function(){clearInterval(timer),timer=setInterval(nextDiapo,slideInterval),$("#pause").show(),$("#play").hide()}),$("#plan li").live("click",function(){$element=$(".slider");var a=b-c,b=$("#plan li").index($(this)),c=currentIndex;if(0==a)clearInterval(timer),timer=setInterval(nextDiapo,SlideInterval);else{for(;c!=b;)$element.css({marginLeft:-900}).find("li:last").after($element.find("li:first")),c=(c+1)%$nbrChild;goTo(b),currentIndex=b}$("#pause").is(":visible")&&pause()}),$("#pause").click(pause),$("#next").click(nextDiapo),$("#prev").click(prevDiapo)});